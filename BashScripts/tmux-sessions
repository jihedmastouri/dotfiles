#!/bin/bash
session="ArchiMed"

echo "$(tmux list-sessions)" | grep -q "$session" &&
	tmux attach "$session" && exit 0

tmux dettach-client
tmux new-session -d -s $session
cd ~/devenv/ArchiMed

window=0
tmux new-window -t $session:$window -n 'serve'
tmux send-keys -t $session:$window 'cd ArchiMed/Frontend; npm run dev' C-m

window=2
tmux new-window -t $session:$window -n 'run'
tmux send-keys -t $session:$window 'cd ArchiMed/Frontend' C-m

window=1
tmux new-window -t $session:$window -n 'vim'
tmux send-keys -t $session:$window "cd ArchiMed/Frontend; $EDITOR ." C-m

tmux attach-session -t $session

